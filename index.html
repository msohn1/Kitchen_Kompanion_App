<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kitchen Kompanion</title>
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <div class="app">
      <div id="shopping" class="tabcontent">
        <!-- <h2>Shopping List</h2> -->
        <div class="shop-toolbar inv-toolbar">
          <select id="shopFilterCategory">
            <option value="all">All categories</option>
            <option value="dairy">Dairy</option>
            <option value="carb">Carb</option>
            <option value="veggies">Veggies</option>
            <option value="protein">Protein</option>
            <option value="condiment">Condiment</option>
            <option value="other">Other</option>
          </select>

          <input id="shopSearch" type="search" placeholder="Search..." />
          <button class="btn" id="transferBought">Transfer Items</button>
          <button class="btn accent" id="openAddShopModal">+ Add Item</button>
        </div>

        <div class="inv-wrap">
          <table class="inv-table" id="shopTable">
            <thead>
              <tr>
                <th class="chk-col"></th>
                <th class="sortable" data-sort="name">Item</th>
                <th class="sortable" data-sort="category">Category</th>
                <th class="num">Qty</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="shopBody"></tbody>
          </table>
          <p id="shopEmpty" class="muted hidden">No items in shopping list.</p>
        </div>
      </div>

      <div id="inventory" class="tabcontent">
        <!-- <h2>Inventory</h2> -->
        <div class="inv-toolbar">
          <button class="btn" id="filterAll">All</button>
          <button class="btn" id="filterExpiring">Expiring</button>
          <select id="filterCategory">
            <option value="all">All categories</option>
            <option value="dairy">Dairy</option>
            <option value="carb">Carb</option>
            <option value="veggies">Veggies</option>
            <option value="protein">Protein</option>
            <option value="condiment">Condiment</option>
            <option value="other">Other</option>
          </select>
          <input id="invSearch" type="search" placeholder="Search..." />
          <button class="btn accent" id="openAddModal">+ Add Item</button>
        </div>

        <div class="inv-wrap">
          <table class="inv-table" id="invTable">
            <thead>
              <tr>
                <th data-sort="name" class="sortable">Item</th>
                <th data-sort="category" class="sortable">Category</th>
                <th data-sort="expiry" class="sortable">Expiry</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="invBody"></tbody>
          </table>
          <p id="invEmpty" class="muted hidden">No items to show.</p>
        </div>
      </div>

      <div id="recipes" class="tabcontent">
        <!-- <h2>Suggested Recipes</h2> -->
        <div class="inv-toolbar recipe-toolbar">
          <input id="recipeSearch" type="search" placeholder="Search recipes, ingredients…" />
          <select id="recipeSort">
            <option value="recommended">Recommended</option>
            <option value="missing">Most ingredients match</option>
            <option value="time">Shortest time</option>
          </select>
          <select id="recipeDietFilter">
            <option value="all">All diets</option>
            <option value="vegetarian">Vegetarian</option>
            <option value="vegan">Vegan</option>
            <option value="pescatarian">Pescatarian</option>
          </select>
        </div>
        <div class="inv-wrap">
          <div id="recipesList"></div>
        </div>
      </div>

      <div id="setting" class="tabcontent">
        <div class="settings-page">
          <form id="settingsForm" class="settings-grid">
            <section class="settings-card">
              <div class="settings-card-head">
                <div>
                  <p class="eyebrow">Diet & Preference</p>
                  <h3>What Do You Want to See?</h3>
                  <p class="hint">Pick one primary diet or leave it open. This filters recipe suggestions.</p>
                </div>
              </div>
              <div class="pill-grid">
                <label class="pill-choice"><input type="radio" name="dietRadio" value="none" checked /> No filter</label>
                <label class="pill-choice"><input type="radio" name="dietRadio" value="vegetarian" /> Vegetarian</label>
                <label class="pill-choice"><input type="radio" name="dietRadio" value="vegan" /> Vegan</label>
                <label class="pill-choice"><input type="radio" name="dietRadio" value="pescatarian" /> Pescatarian</label>
              </div>
            </section>

            <section class="settings-card">
              <div class="settings-card-head">
                <div>
                  <p class="eyebrow">Allergies</p>
                  <h3>Never Show Recipes With These</h3>
                  <p class="hint">Recipes containing these will be hidden. Shopping auto-add respects this list.</p>
                </div>
              </div>
              <div class="pill-grid">
                <label class="pill-choice"><input type="checkbox" name="allergy" value="peanuts" /> Peanuts</label>
                <label class="pill-choice"><input type="checkbox" name="allergy" value="tree-nuts" /> Tree nuts</label>
                <label class="pill-choice"><input type="checkbox" name="allergy" value="milk" /> Milk</label>
                <label class="pill-choice"><input type="checkbox" name="allergy" value="eggs" /> Eggs</label>
                <label class="pill-choice"><input type="checkbox" name="allergy" value="soy" /> Soy</label>
                <label class="pill-choice"><input type="checkbox" name="allergy" value="wheat" /> Wheat</label>
                <label class="pill-choice"><input type="checkbox" name="allergy" value="fish" /> Fish</label>
                <label class="pill-choice"><input type="checkbox" name="allergy" value="shellfish" /> Shellfish</label>
                <label class="pill-choice"><input type="checkbox" name="allergy" value="sesame" /> Sesame</label>
                <label class="pill-choice"><input type="checkbox" name="allergy" value="gluten" /> Gluten</label>
                <label class="pill-choice"><input type="checkbox" name="allergy" value="mustard" /> Mustard</label>
                <label class="pill-choice"><input type="checkbox" name="allergy" value="sulfites" /> Sulfites</label>
                <label class="pill-choice pill-input">
                  <input type="text" id="customAllergyInput" placeholder="Add other allergies…" />
                  <button type="button" class="btn" id="addCustomAllergy">Add</button>
                </label>
              </div>
              <div id="customAllergyList" class="chip-list"></div>
            </section>

            <section class="settings-card">
              <div class="settings-card-head">
                <div>
                  <p class="eyebrow">Cooking Skill</p>
                  <h3>Your Comfort Level</h3>
                  <p class="hint">We won’t suggest recipes above your comfort level.</p>
                </div>
              </div>
              <div class="pill-grid single-field">
                <label class="pill-choice pill-select">
                  <select id="skillSelect" name="skill">
                    <option value="beginner">Beginner</option>
                    <option value="novice">Novice</option>
                    <option value="intermediate">Intermediate</option>
                    <option value="expert">Expert</option>
                  </select>
                </label>
              </div>
            </section>

            <section class="settings-card">
              <div class="settings-card-head">
                <div>
                  <p class="eyebrow">Style Preference</p>
                  <h3>How to Bias Suggestions</h3>
                  <p class="hint">Used to bias recipe ranking and shopping suggestions.</p>
                </div>
              </div>
              <div class="pill-grid single-field">
                <label class="pill-choice pill-select">
                  <select id="foodPref" name="foodPref">
                    <option value="none">No preference</option>
                    <option value="vegetarian">More vegetarian ideas</option>
                    <option value="vegan">More vegan ideas</option>
                    <option value="low-carb">Lower carb focus</option>
                    <option value="high-protein">Higher protein focus</option>
                  </select>
                </label>
              </div>
            </section>

            <div class="settings-actions">
              <div class="changes-note">Changes apply to recipes, inventory alerts, and shopping auto-add.</div>
              <div class="action-row">
                <button type="button" class="btn ghost" id="cancelSettings">Cancel</button>
                <button type="button" class="btn" id="resetSettings">Reset</button>
                <button type="button" class="btn accent" id="saveSettings">Save</button>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- Add Item Modal -->
      <div class="modal" id="addModal" aria-hidden="true">
        <div class="modal-card">
          <div class="modal-head">
            <h3>Add Inventory Item</h3>
            <button class="icon-btn" id="closeAddModal" aria-label="Close">×</button>
          </div>

          <form id="addForm" class="grid">
            <label>
              <span>Name</span>
              <input required name="name" type="text" placeholder="e.g., Milk" />
            </label>
            <label>
              <span>Quantity</span>
              <input required name="qty" type="number" min="0" step="0.01" />
            </label>
            <label>
              <span>Unit</span>
              <select name="unit" id="addItemUnit">
                <option value="">None</option>
                <option value="pcs">pcs</option>
                <option value="oz">oz</option>
                <option value="lb">lb</option>
                <option value="g">g</option>
                <option value="kg">kg</option>
                <option value="ml">ml</option>
                <option value="l">L</option>
                <option value="cup">cup</option>
                <option value="qt">qt</option>
                <option value="gal">gal</option>
                <option value="pack">pack</option>
                <option value="box">box</option>
                <option value="bottle">bottle</option>
                <option value="bag">bag</option>
                <option value="dozen">dozen</option>
                <option value="other">Other</option>
              </select>
            </label>
            <label>
              <span>Min qty</span>
              <input required name="minQty" type="number" min="0" step="0.01" />
            </label>
            <label>
              <span>Expiry</span>
              <input name="expiry" type="date" />
            </label>
            <label>
              <span>Category</span>
              <select id="addShopCategory" name="category">
                <option value="dairy">Dairy</option>
                <option value="carb">Carb</option>
                <option value="veggies">Veggies</option>
                <option value="protein">Protein</option>
                <option value="condiment">Condiment</option>
                <option value="other" selected>Other</option>
              </select>
            </label>

            <div class="modal-actions">
              <button type="button" class="btn" id="cancelAdd">Cancel</button>
              <button type="submit" class="btn accent">Save</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Confirm add missing ingredients modal -->
      <div class="modal" id="confirmMissingModal" aria-hidden="true">
        <div class="modal-card">
          <div class="modal-head">
            <h3>Add Missing Ingredients</h3>
            <button class="icon-btn" id="closeConfirmMissing" aria-label="Close">×</button>
          </div>
          <div class="modal-body">
            <div id="missingList"></div>
          </div>
          <div class="modal-actions">
            <button type="button" class="btn" id="cancelConfirmMissing">Cancel</button>
            <button type="button" class="btn accent" id="confirmAddMissing">Add to Shopping</button>
          </div>
        </div>
      </div>

      <div class="tabbar">
        <button class="tablink" onclick="openTab('inventory')">
          <img src="icons/fridge.png" alt="" class="tab-icon" aria-hidden="true" />Inventory
        </button>

        <button class="tablink" onclick="openTab('shopping')">
          <img src="icons/price-list.png" alt="" class="tab-icon" aria-hidden="true" />Shopping
        </button>

        <button class="tablink" onclick="openTab('recipes')">
          <img src="icons/cookbook.png" alt="" class="tab-icon" aria-hidden="true" />Recipes
        </button>

        <button class="tablink" onclick="openTab('setting')">
          <img src="icons/cogwheel.png" alt="" class="tab-icon" aria-hidden="true" />Setting
        </button>
      </div>
    </div>

    <!-- Add Shopping Item Modal -->
    <div class="modal" id="addShopModal" aria-hidden="true">
      <div class="modal-card">
        <div class="modal-head">
          <h3>Add Shopping Item</h3>
          <button class="icon-btn" id="closeAddShopModal" aria-label="Close">×</button>
        </div>
        <form id="addShopForm" class="grid">
          <label>
            <span>Name</span>
            <input required name="name" type="text" placeholder="e.g., Milk" />
          </label>
          <label>
            <span>Quantity</span>
            <input required name="qty" type="number" min="1" step="1" value="1" />
          </label>
          <label>
            <span>Category</span>
            <select name="category">
              <option value="dairy">Dairy</option>
              <option value="carb">Carb</option>
              <option value="veggies">Veggies</option>
              <option value="protein">Protein</option>
              <option value="condiment">Condiment</option>
              <option value="other" selected>Other</option>
            </select>
          </label>
          <div class="modal-actions">
            <button type="button" class="btn" id="cancelAddShop">Cancel</button>
            <button type="submit" class="btn accent">Save</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Generic Confirm Modal -->
    <div
      class="modal"
      id="confirmModal"
      aria-hidden="true"
      role="dialog"
      aria-labelledby="confirmTitle"
    >
      <div class="modal-card">
        <div class="modal-head">
          <h3 id="confirmTitle">Confirm</h3>
          <button class="icon-btn" id="closeConfirmModal" aria-label="Close">×</button>
        </div>
        <div class="modal-body">
          <p id="confirmMessage">Are you sure?</p>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn" id="confirmCancel">Cancel</button>
          <button type="button" class="btn accent" id="confirmOk">Confirm</button>
        </div>
      </div>
    </div>

    <!-- Edit Inventory Cell Modal -->
    <div class="modal" id="editCellModal" aria-hidden="true">
      <div class="modal-card">
        <div class="modal-head">
          <h3 id="editCellTitle">Edit</h3>
          <button class="icon-btn" id="closeEditCellModal" aria-label="Close">×</button>
        </div>
        <form id="editCellForm" class="grid" style="grid-template-columns: 1fr">
          <label id="editQtyLabel">
            <span>Quantity</span>
            <input id="editQtyInput" type="number" min="0" step="0.01" />
          </label>
          <label id="editExpiryLabel" style="display: none">
            <span>Expiry</span>
            <input id="editExpiryInput" type="date" />
          </label>
          <div class="modal-actions">
            <button type="button" class="btn" id="cancelEditCell">Cancel</button>
            <button type="submit" class="btn accent" id="saveEditCell">Save</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Edit Inventory Item Modal (full details) -->
    <div class="modal" id="editItemModal" aria-hidden="true">
      <div class="modal-card">
        <div class="modal-head">
          <h3>Edit Inventory Item</h3>
          <button class="icon-btn" id="closeEditItemModal" aria-label="Close">×</button>
        </div>
        <form id="editItemForm" class="grid">
          <input type="hidden" id="editItemId" />
          <label>
            <span>Name</span>
            <input required id="editItemName" name="name" type="text" placeholder="e.g., Milk" />
          </label>
          <label>
            <span>Quantity</span>
            <input required id="editItemQty" name="qty" type="number" min="0" step="0.01" />
          </label>
          <label>
            <span>Unit</span>
            <select id="editItemUnit" name="unit">
              <option value="">None</option>
              <option value="pcs">pcs</option>
              <option value="oz">oz</option>
              <option value="lb">lb</option>
              <option value="g">g</option>
              <option value="kg">kg</option>
              <option value="ml">ml</option>
              <option value="l">L</option>
              <option value="cup">cup</option>
              <option value="qt">qt</option>
              <option value="gal">gal</option>
              <option value="pack">pack</option>
              <option value="box">box</option>
              <option value="bottle">bottle</option>
              <option value="bag">bag</option>
              <option value="dozen">dozen</option>
              <option value="other">Other</option>
            </select>
          </label>
          <label>
            <span>Min qty</span>
            <input required id="editItemMinQty" name="minQty" type="number" min="0" step="0.01" />
          </label>
          <label>
            <span>Expiry</span>
            <input id="editItemExpiry" name="expiry" type="date" />
          </label>
          <label>
            <span>Category</span>
            <select id="editItemCategory" name="category">
              <option value="dairy">Dairy</option>
              <option value="carb">Carb</option>
              <option value="veggies">Veggies</option>
              <option value="protein">Protein</option>
              <option value="condiment">Condiment</option>
              <option value="other">Other</option>
            </select>
          </label>

          <div class="modal-actions">
            <button type="button" class="btn" id="cancelEditItem">Cancel</button>
            <button type="submit" class="btn accent">Save</button>
          </div>
        </form>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
